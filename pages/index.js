import Head from 'next/head'
import Image from 'next/image'
import styles from '../styles/Home.module.css'
import { useState } from 'react'
import BrandBlocks from './comps/brandBlocks'
import {nanoid} from 'nanoid'


export default function Home() {


  const [inputLink, setinputLink] = useState('');;
  
  const [currentShortLink, setcurrentShortLink] = useState('Short link will appear here')

  const [linkArr, setlinkArr] = useState([]);
  
  const [isOpen, setisOpen] = useState(false)

  const [shortenedLink, setshortenedLink] = useState()

  function updateInputLink(event){
    setinputLink(event.target.value)

  }
  console.log(inputLink);
  
  

  async function shortFunction(){
    var url = new URL(" https://api.shrtco.de/v2/shorten?url=example.org/very/long/link.html");
    url.searchParams.set('url', inputLink);
    fetch(url)
    .then(response => response.json())
    .then( (data)=> {
      const Data=data.result.full_short_link
      console.log(Data);
      setcurrentShortLink(Data);

      const NewArr={
        id:nanoid(),
        longText: inputLink,
        shorttext: (data.result.full_short_link)
      }
      const FinalArr=[...linkArr,NewArr]
      setlinkArr(FinalArr)
      console.log(linkArr)
      setinputLink('')

    })}

    function copyFunction(){
      navigator.clipboard.writeText(currentShortLink);
      alert("Link Copied: " + currentShortLink);
    }

  return (
    <div>
    <div className={styles.container}>
      <Head>
        <title>Url-Shortener</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/vercel.svg" />
      </Head>

      <div className={styles.navWrapper}>
      <nav >
        <div className={styles.containerNav}>
        <div><Image
            src="/logo.svg"
            width={170}
            height={50}
            layout='intrinsic'
        ></Image></div>
        <div className={styles.menu}>
          
            <a href=''>Features </a>
            <a href=''>Pricing </a>
            <a href=''>Resources</a>
        </div>
        <div>
            <button  className={styles.hamburger}>
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        </div>
      </nav>
      </div>

      <div className={styles.mainText}>MORE THAN JUST SHORTER LINKS</div>

      <Image 
              src="/people working.svg" 
              layout='responsive'
              alt="people-working Logo" 
              width={350}
              height={150}
             
              />

    <div className={styles.inputSection}>
      <div className={styles.inputDiv}>

          <div className={styles.inputfield}>
            <input className={styles.inputField}
                  onChange={updateInputLink}
                 
                  type='text'
                  value={inputLink}
                  id='inputLink'
                    placeholder='Shorten a link here'
            ></input>
          </div>
            
          <button className={styles.shortenButton} 
                  onClick={shortFunction}
                  
          >Shorten it!</button>

      </div>
      </div>


      

     
      <div className={styles.vShortenDiv} >
            <div className={styles.shortLinkMainDiv}>
                <div className={styles.shortLinkText}><h1>{currentShortLink}</h1></div>
            </div>
                <div >
                  <button  className={styles.vShortenButton} onClick={copyFunction}>Copy Link</button>
                </div>
      </div>

      <div className={styles.secondPart}>

          <div className={styles.secondRestrictor}>
              <div className={styles.secondMainText}>
                  Advanced Statistics
              <div className={styles.secondPara}>
              <p>Track how your links are perorming across the Web with our Advanced statistics Dashboard</p>
              </div>
              </div>
          </div>
      </div>

    </div>

    <div className={styles.brandMainDiv}>
      <BrandBlocks/>
      <BrandBlocks/>
      <BrandBlocks/>
    
        
        </div>

      <div>
      <div className={styles.boostDiv}>
          <div>
            <h1 className={styles.h1BoostText}>Boost your links today</h1>
          </div>
          <div>
            <button className={styles.boostButton}>Get Started</button>
          </div>
        </div>
      </div>

    <footer className={styles.footer}>
      <div className={styles.footerWrapper}>
        

        <div className={styles.footerDiv}>

        <div className={styles.singleFooterDiv}>
        <div className={styles.shortlyFooterDiv}>
            <div>
              <h1>Shortly</h1>
            </div>
            <div className={styles.footerIcons}> 
               <div className={styles.smallIcon}><Image src="/icon-facebook.svg" layout='fixed' width={30} height={30} ></Image></div>
               <div className={styles.smallIcon}><Image src="/icon-twitter.svg" layout='fixed' width={30} height={30}></Image></div>
               <div className={styles.smallIcon}><Image src="/icon-pinterest.svg" layout='fixed' width={30} height={30}></Image></div>
               <div className={styles.smallIcon}><Image src="/icon-instagram.svg" layout='fixed' width={30} height={30}></Image></div>
            </div>
          </div>
          </div>
          
          <div className={styles.singleFooterDiv}>
            <div className={styles.footerDivHeader}>
              <h3>Features</h3>
            </div>
            <div className={styles.footerDivPara}>
            <p>Link shortening</p>
            <p>Branded Links</p>
            <p>Analytics</p>
            </div>
          </div>

          <div className={styles.singleFooterDiv}>
            <div className={styles.footerDivHeader}>
              <h3>Resourcess</h3>
            </div>
            <div className={styles.footerDivPara}>
            <p>Blog</p>
            <p>Developers</p>
            <p>Support</p>
            </div>
          </div>

          <div className={styles.singleFooterDiv}>
            <div className={styles.footerDivHeader}>
              <h3>Company</h3>
            </div>
            <div className={styles.footerDivPara}>
            <p>About</p>
            <p>Our team</p>
            <p>Careers</p>
            <p>Contact</p>
            </div>
          </div>


          </div>
        </div>
      </footer>

    </div>
  )
}
